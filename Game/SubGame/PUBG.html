<!DOCTYPE html>
<html lang="en">
<head>
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pesan Produk PUBG</title>
<style>
       
        html {
    scroll-behavior: smooth;
}

    /* Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background-color: #121212;
      color: #ffffff;
      justify-content: center;
      align-items: center;
      height: 100vh;
      
    }


    
    .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background-color: #1e1e1e;
        padding: 10px;
        color: #ffffff;
        border-bottom: 1px solid #444;
    }

    .header h1 {
        font-size: 16px;
        margin: 0;
        text-align: center;
        flex-grow: 1;
        
        font-family: 'Press Start 2P', cursive;
    }

   .back-button {
    background: none; /* No background */
    border: none; /* No border */
    color: #ffffff; /* Text color */
    font-size: 18px; /* Font size */
    cursor: pointer; /* Pointer on hover */
    padding: 10px; /* Padding */
    transition: color 0.3s ease, transform 0.3s ease; /* Transition effects */
    position: relative; /* For positioning */
    left: -15px; /* Move the button to the left */
    text-decoration: none; /* Remove underline */
    display: inline-flex; /* Use flexbox for better alignment */
    align-items: center; /* Center items vertically */
}

.back-button i {
    margin-right: 5px; /* Space between icon and text */
}

/* Hover effects */
.back-button:hover {
    color: #00e676; /* Change text color on hover */
    transform: translateY(-3px); /* Slight lift effect */
}

/* Focus effect for accessibility */
.back-button:focus {
    outline: none; /* Remove default outline */
    box-shadow: 0 0 0 3px rgba(0, 230, 118, 0.5); /* Custom focus outline */
}


    
#intruksi {
    margin-bottom: 18px;
    font-size: 15px;
    color: #ffffff;
    font-weight: 700;
    text-transform: uppercase;
    
    text-align: left;
    padding: 12px 20px; /* Padding for more presence */
    width: 180px;
    
    /* Rounded Rectangle Background */
    background: linear-gradient(135deg, #1f1f1f, #3b3b3b); /* Dark gradient background */
    border-radius: 12px; /* Smooth, rounded corners */
    
    /* Shadow */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); /* Softer shadow for depth */
    border-left: 5px solid #4e9eff; /* Subtle blue accent on the left */
}






  .form-card {
  margin: 20px auto; /* Centers the card horizontally and adds vertical spacing */
  padding: 20px;
  width: 95%; /* Set width relative to the screen, so it scales */
  max-width: 380px; /* Limits the maximum width */
  background: linear-gradient(145deg, #1e1e1e, #232323); /* Gradasi untuk tampilan dinamis */
  border-radius: 16px; /* Sudut lebih bulat untuk kesan modern */
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3), /* Shadow utama */
              0 2px 6px rgba(0, 0, 0, 0.2); /* Shadow tambahan untuk kedalaman */
  transition: transform 0.3s ease, box-shadow 0.3s ease; /* Transisi halus */
}

.form-card:hover {
  transform: translateY(-5px); /* Sedikit mengangkat saat hover */
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4), /* Shadow lebih intens saat hover */
              0 4px 12px rgba(0, 0, 0, 0.3); /* Tambahan shadow */
}



 .products-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px; /* Lebih besar untuk memberikan ruang antar produk */
  margin-bottom: 20px;
}

.product {
  background: linear-gradient(145deg, #2b2b2b, #1e1e1e); /* Gradasi dua warna gelap */
  padding: 15px;
  border-radius: 12px; /* Sudut bulat */
  cursor: pointer;
  position: relative;
  border: 1px solid #2d323cda;
  transition: transform 0.3s ease, box-shadow 0.3s ease; /* Transisi yang lebih halus */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* Shadow lebih halus */
}

.product:hover {
  transform: translateY(-5px); /* Efek hover */
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2), /* Shadow lebih intens */
              0 0 15px rgba(0, 230, 118, 0.4); /* Efek glowing hijau lembut */
}

.product.selected {
  border-color: #00e676; /* Warna hijau saat dipilih */
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2), /* Shadow intens */
              0 0 20px rgba(0, 230, 118, 0.6); /* Efek glowing lebih kuat */
}


.product h3 {
  margin-bottom: 10px;
  font-size: 13.8px;
  color: #ffffff; /* Warna teks putih untuk kontras */
  font-weight: 600; /* Font tebal untuk penekanan */
  text-transform: uppercase; /* Mengubah teks menjadi kapital untuk kesan lebih tegas */
  letter-spacing: 1px; /* Menambah spasi antar huruf untuk kesan elegan */
  position: relative;
  transition: color 0.3s ease, transform 0.3s ease; /* Animasi saat hover */
  z-index: 1;
}


.product h3::after {
  content: ''; /* Menambahkan elemen setelah teks */
  display: block;
  width: 50px; /* Lebar garis awal */
  height: 3px; /* Tinggi garis */
  background-color: #00e676; /* Warna garis */
  margin: 10px 0; /* Margin atas dan bawah */
  transition: width 0.3s ease; /* Animasi untuk transisi lebar */
}

/* Memperpanjang garis saat produk dipilih */
.product.selected h3::after {
  width: 100px; /* Memperpanjang garis saat produk dipilih */
}


/* Mengatur kontainer harga asli dan persentase diskon menggunakan flexbox */
.product .harga-wrapper {
  display: flex;
  align-items: center; /* Vertikal align agar teks rata tengah */
  margin-bottom: 10px; /* Beri sedikit jarak dari harga diskon */
}

.product .harga-asli {
  text-decoration: line-through;
  color: #888888; /* Warna yang lebih gelap untuk elegansi */
  font-size: 13px;
  margin-right: 10px; /* Jarak antara harga asli dan persen diskon */
}

/* Persentase diskon default tanpa glow */
.product .persen-diskon {
  color: #00e676;
  font-size: 0.7em;
  font-weight: bold;
  padding: 6px 2px;
  border-radius: 5px;
  background-color: rgba(0, 230, 118, 0.1); /* Background hijau muda transparan */
  border: 1px solid #00e676; /* Border hijau */
  /* Efek glow dihapus dari default */
}

/* Efek glowing aktif hanya saat produk dipilih */
.product.selected .persen-diskon {
  animation: glow-green 1.5s infinite alternate; /* Animasi glow hijau */
}

/* Efek glowing untuk persen diskon berwarna hijau */
@keyframes glow-green {
  0% {
    box-shadow: 0 0 5px #00e676; /* Cahaya hijau awal */
  }
  100% {
    box-shadow: 0 0 20px #00e676; /* Cahaya hijau lebih intens */
  }
}


/* Harga diskon dengan tampilan lebih elegan */
.product .harga-diskon {
  color: #ffffff;
  background-color: #42a5f5;
  padding: 5px 15px;
  border-top-right-radius: 20px;
  border-bottom-left-radius: 20px;
  font-size: 14px;
  font-weight: 500;
  display: inline-block;
  position: relative;
  overflow: hidden;
  z-index: 1;
  animation: flash-animation 1.5s infinite;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
  margin-top: 5px;
}

@keyframes flash-animation {
  0% {
    background-color: #42a5f5;
  }
  50% {
    background-color: #64b5f6;
  }
  100% {
    background-color: #42a5f5;
  }
}



    .metode-pembayaran {
      margin-bottom: 20px;
      margin-top: 20px;
    }

    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border: none;
      border-radius: 4px;
      background-color: #2c2c2c;
      color: #ffffff;
      font-size: 16px;
    }

    /* Button */
    .button-container {
  display: grid;            /* Enable grid */
  place-items: center;     
  margin-bottom: 65px;
}

button {
  width: 100%;
  max-width: 280px;
  padding: 14px;
  background: linear-gradient(135deg, #6200ea, #3700b3); /* Subtle gradient */
  color: #ffffff;
  border: none;
  border-radius: 8px; /* Slightly more rounded corners */
  font-size: 16px;
  font-weight: 600; /* Make font a bit bolder */
  cursor: pointer;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2); /* Soft shadow for depth */
  transition: all 0.3s ease;
  outline: none;
}

button:hover {
  background: linear-gradient(135deg, #3700b3, #6200ea); /* Reverse gradient for effect */
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); /* Stronger shadow on hover */
  transform: translateY(-3px); /* Slight lift effect */
}

button:active {
  transform: translateY(1px); /* Subtle press-in effect */
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Reduced shadow when active */
}


   /* Spinner Style */
.spinner {
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top: 4px solid #6200ea;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    display: none;
    margin: 0 auto;
}

/* Modern Blue-Black Modal Styling */
.modal {
    position: fixed;
    left: 0;
    bottom: -100%;
    width: 100%;
    background-color: #121212; /* Deep black background */
    color: #ffffff;
    border-radius: 16px 16px 0 0;
    padding: 20px;
    box-shadow: 0 -6px 24px rgba(0, 0, 0, 0.8);
    transition: all 0.4s ease-in-out;
}

.modal.show {
    bottom: 0;
}

.modal-header {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.modal-drag-handle {
    width: 60px;
    height: 6px;
    background-color: #555555; /* Subtle gray for the handle */
    border-radius: 3px;
    margin-bottom: 15px;
}

.modal-title {
    font-size: 22px;
    font-weight: 700;
    margin-bottom: 15px;
    color: #4e9eff; /* Bright blue for title */
}

.modal-content {
    margin-bottom: 20px;
    font-family: 'Arial', sans-serif;
    font-size: 16px;
    text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.5);
    background: linear-gradient(135deg, rgba(0, 45, 90, 0.8), rgba(0, 80, 160, 0.3)); /* Blue gradient background */
    padding: 18px;
    border-radius: 12px;
    border: 2px solid #4e9eff; /* Blue border */
    display: flex;
    flex-direction: column;
    align-items: stretch;
}

.modal-content p {
    margin: 8px 0;
    width: 100%;
    text-align: left;
    border-bottom: 1px solid #4e9eff;
    padding: 8px 0;
}

.modal-content p:last-child {
    border-bottom: none;
}

.modal button {
    background-color: #4e9eff; /* Bright blue button */
    color: white;
    border: none;
    border-radius: 8px;
    padding: 12px 24px;
    font-size: 16px;
    transition: background-color 0.3s ease, transform 0.2s ease;
    cursor: pointer;
    margin-top: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

.modal button:hover {
    background-color: #3a8de0; /* Darker blue on hover */
    transform: translateY(-3px);
}


/* Footer */
footer {
    background: linear-gradient(135deg, #1a1a2e, #1c1c1c);
    color: #dcdcdc;
    padding: 60px 20px;
    font-family: 'Roboto', sans-serif;
    border-top: 2px solid #333;
    box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.2);
}

/* Footer Container */
.footer-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
}

/* Footer Logo */
.footer-logo {
    text-align: left;
}

.footer-logo h2 {
    font-size: 23px;
    font-weight: bold;
    color: #4a90e2; /* Modern blue accent */
    margin-bottom: 15px;
    text-transform: uppercase;
    letter-spacing: 2px;
}

.footer-logo p {
    max-width: 400px;
    font-size: 14px;
    line-height: 1.8;
    color: #bfbfbf;
}

/* Footer Links */
.footer-links {
    display: flex;
    justify-content: space-around;
    gap: 40px;
}

.footer-links ul {
    list-style: none;
    padding: 0;
}

.footer-links li {
    margin-bottom: 12px;
}

.footer-links a {
    color: #4a90e2;
    text-decoration: none;
    font-size: 16px;
    transition: color 0.3s ease, transform 0.3s ease;
    position: relative;
}

.footer-links a::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -2px;
    width: 100%;
    height: 2px;
    background-color: #4a90e2;
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.footer-links a:hover {
    color: #ffffff;
}

.footer-links a:hover::after {
    transform: scaleX(1);
}

/* Footer Social Links */
.footer-social {
    text-align: center;
    margin-top: 20px;
}

.footer-social a {
    color: #4a90e2;
    margin: 0 10px;
    font-size: 24px;
    transition: color 0.3s ease, transform 0.3s ease;
}

.footer-social a:hover {
    color: white;
    transform: scale(1.2);
}

/* Footer Legal Section */
.footer-legal {
    grid-column: 1 / -1;
    text-align: center;
    margin-top: 40px;
    font-size: 13px;
    color: #888;
    border-top: 1px solid #333;
    padding-top: 15px;
}

.footer-legal p:hover {
    color: #4a90e2;
}

        


    .description-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #20253fe4;
        padding: 20px;
        height: 220px;
        margin-top: 2px;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .text-description {
        max-width: 70%;
    }

    .text-description h2 {
        font-size: 24px;
        margin: 0 0 10px;
        font-family: 'Press Start 2P', cursive;
    }

    .text-description p {
        font-size: 14px;
        margin: 0 0 20px;
        line-height: 1.6;
    }

    .labels {
        display: flex;
        gap: 10px;
        margin-top: 8px;
        justify-content: center; /* Posisi center secara horizontal */
    }

    .label-safe,
    .label-fast {
        background-color: #00e676;
        color: white;
        font-size: 14px;
        padding: 8px 12px;
        border-radius: 5px;
        font-family: 'Roboto', sans-serif;
        display: flex;
        align-items: center;
    }

    .label-safe {
        background-color: #28a745;
    }

    .label-fast {
        background-color: #ffcc00;
    }

    .label-safe i,
    .label-fast i {
        margin-right: 8px;
        font-size: 16px;
    }
    .image-container {
        max-width: 25%;
        text-align: right;
    }

    .game-image {
        width: 100px;
        border-radius: 10px;
    }

.result {
            margin-top: 20px;
            text-align: center;
        }
        /* Spinner Style */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #6200ea;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            display: none;
            margin: 0 auto;
            margin-top: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }


.filter-options {
  display: flex;
  align-items: center;
  margin-bottom: 20px;
}

.filter-options label {
  margin-right: 10px;
  font-weight: bold;
  color: #e4e4e4;
}

.select-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.select-wrapper i {
  position: absolute;
  left: 10px;
  color: #888; /* Warna ikon */
}

select {
  padding: 8px 30px; /* Padding untuk memberi ruang pada ikon */
  border: 1px solid #ccc;
  border-radius: 4px;
  outline: none;
  font-size: 12px;
  appearance: none; /* Menghilangkan tampilan default dropdown */
  background: #f9f9f9; /* Warna latar belakang */
  color: #555; /* Warna teks */
  cursor: pointer;
  transition: border-color 0.3s ease; /* Transisi border */
}

select:hover {
  border-color: #888; /* Warna border saat hover */
}

select:focus {
  border-color: #007bff; /* Warna border saat fokus */
  box-shadow: 0 0 5px rgba(0, 123, 255, 0.5); /* Efek bayangan saat fokus */
}


  </style>
</head>
<body>

 <!-- Header with Back Button -->
<header class="header">
    
    
   <a href="https://ahsan-store-github-io.vercel.app/" class="back-button">
    <i class="fas fa-arrow-left"></i> Kembali
</a>


    <h1>Product PUBG</h1>
</header>

<div class="description-container">
    <div class="text-description">
        <h2>PUBG MOBILE</h2>
        <p>PUBG (PlayerUnknown's Battlegrounds) adalah game battle royale yang sangat populer di seluruh dunia. Nikmati pengalaman bertahan hidup yang mendebarkan dengan mode permainan yang seru dan realistis!</p>
        
    </div>
    <div class="image-container">
        <img src="https://static-src.vocagame.com/topupnolimit/unnamed%20(3)-04102-original.png" alt="Mobile Legends" class="game-image">
    </div>
</div>

<div class="labels">
    <span class="label-safe">
        <i class="fas fa-shield-alt"></i> 100% Aman
    </span>
    <span class="label-fast">
        <i class="fas fa-clock"></i> Proses 1-2 Menit
    </span>
</div>

 <!-- Form UID -->
<form id="checkForm">
    <div class="form-card">
       <h3 id="intruksi">1. Masukkan ID</h3>
        <input type="text" id="uid" placeholder="Masukkan ID" required>
       
              
    </div>
</form>


  <!-- Pilihan Produk -->
  <div class="form-card">
    <h3 id="intruksi">2. Pilih Produk</h3>
    
     <div class="filter-options">
  <label for="sortPrice">Kategori :</label>
  <div class="select-wrapper">
    <i class="fas fa-sort-amount-down-alt"></i> <!-- Ikon untuk dropdown -->
    <select id="sortPrice">
      <option value="termurah">Termurah</option>
      <option value="termahal">Termahal</option>
      <option value="WDP">Royal Pass</option>
    </select>
  </div>
</div>
    
    <div class="products-grid" id="productContainer">
      <!-- Produk akan diisi dari Firebase -->
    </div>
  </div>

  <!-- Metode Pembayaran -->
<div class="form-card metode-pembayaran">
   <h3 id="intruksi">3. Pilih Metode Pembayaran</h3>
    <input type="radio" id="qrPayment" name="paymentMethod" value="QR" checked>
    <label for="qrPayment">Pembayaran via QR</label>
    <p style="margin-top: 5px; color: #bbbbbb; font-size: 14px;">
        Metode ini memungkinkan Anda untuk melakukan pembayaran dengan memindai kode QR yang akan muncul setelah konfirmasi. 
        Pastikan aplikasi pembayaran Anda terhubung dengan internet dan siap digunakan.
    </p>
</div>


<!-- Nomor Telepon -->
<div class="form-card">
    <h3 id="intruksi">4. Masukkan Nomor Telepon</h3>
    <input type="text" id="phoneNumber" placeholder="Masukkan Nomor Telepon" required>
    
    <!-- Peringatan mengenai kewajiban dan informasi kontak -->
    <p style="margin-top: 5px; color: #e53935; font-size: 14px;">
        * Nomor telepon wajib diisi. Jika Anda mengalami kendala, Kami bisa menghubungi kamu.
    </p>
</div>

  
<div class="button-container">
  <button id="placeOrderBtn">Pesan</button>
</div>

<!-- Modal -->
<div id="orderModal" class="modal">
  <div class="modal-header">
    <!-- Drag handle line -->
    <div class="modal-drag-handle"></div>
    <h3>Detail Pesanan</h3>
   
  <div class="modal-content">
    <p id="orderDetails"></p>
  </div>
  <button id="confirmOrderBtn">Lanjutkan</button>
</div>
</div>


<footer>
    <div class="footer-container">
        <div class="footer-logo">
            <h2>Mann Store</h2>
            <p>MannStore adalah website top up murah, cepat, terpercaya dengan banyak pilihan produk, melayani transaksi 24 jam, dan dengan metode pembayaran terlengkap.</p>
        </div>
        <div class="footer-links">
            <ul>
                <li><a href="menu/bantuan.html">Bantuan</a></li>
                
                <li><a href="menu/legal.html">Legal</a></li>
            </ul>
            <ul>
                <li><a href="menu/syarat.html">Syarat & Ketentuan</a></li>
                <li><a href="menu/kebijakan.html">Kebijakan Privasi</a></li>
               
            </ul>
        </div>
       <div class="footer-social">
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="https://www.instagram.com/mann321_?igsh=cDVkc2hlMHR0cWZh"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
        <div class="footer-legal">
            <p>&copy; 2024 MannStore Semua hak cipta dilindungi.</p>
        </div>
    </div>
</footer>





  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-firestore.js"></script>
<script>
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyA1yk1tIBhP8a5VIDo62ZiN9kjD_tNhQ70",
  authDomain: "mannstore-50549.firebaseapp.com",
  projectId: "mannstore-50549",
  storageBucket: "mannstore-50549.appspot.com",
  messagingSenderId: "539021282370",
  appId: "1:539021282370:web:6aa2f6bd176eee94ffb1db",
  measurementId: "G-40JZM8L3WY"
};
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

// Menampilkan produk Mobile Legends dari Firebase
const productContainer = document.getElementById('productContainer');
let selectedProduct = null;

db.collection('PUBG')
  .get()
  .then((querySnapshot) => {
    const products = [];

    // Mengumpulkan data produk
    querySnapshot.forEach((doc) => {
      const data = doc.data();
      products.push(data);
    });

    // Mengurutkan produk berdasarkan harga diskon (default termurah)
    sortProducts(products, 'termurah');

    // Menangani filter berdasarkan pilihan pengguna
    document.getElementById('sortPrice').addEventListener('change', (event) => {
      const filterValue = event.target.value;
      sortProducts(products, filterValue);
    });
  })
  .catch((error) => {
    console.error("Error mendapatkan produk: ", error);
  });

// Fungsi untuk mengurutkan dan menampilkan ulang produk
function displayProducts(products) {
  productContainer.innerHTML = ''; // Bersihkan produk sebelumnya

  if (products.length === 0) {
    productContainer.innerHTML = '<p>Tidak ada produk yang ditemukan.</p>'; // Tampilkan pesan jika tidak ada produk
  } else {
    products.forEach((data) => {
      const hargaAsli = parseInt(data.hargaAsli.replace(/\D/g, ''));
      const hargaDiskon = parseInt(data.hargaDiskon.replace(/\D/g, ''));

      // Menghitung persentase diskon
      const persenDiskon = Math.round(((hargaAsli - hargaDiskon) / hargaAsli) * 100);

      const productDiv = document.createElement('div');
      productDiv.classList.add('product');
      productDiv.innerHTML = `
        <h3>${data.namaBarang}</h3>
        <div class="harga-wrapper">
          <p class="harga-asli">Rp${hargaAsli.toLocaleString('id-ID')}</p>
          <label class="persen-diskon">(${persenDiskon}% OFF)</label>
        </div>
        <p class="harga-diskon">Rp${hargaDiskon.toLocaleString('id-ID')}</p>
      `;
      productDiv.addEventListener('click', () => {
        // Deselect previous product
        document.querySelectorAll('.product').forEach(p => p.classList.remove('selected'));
        productDiv.classList.add('selected');
        selectedProduct = data;
      });
      productContainer.appendChild(productDiv);
    });
  }
}

// Fungsi untuk mengurutkan produk
function sortProducts(products, criteria) {
  let filteredProducts = [...products];

  if (criteria === 'termurah') {
    // Urutkan dari harga termurah
    filteredProducts.sort((a, b) => 
      parseInt(a.hargaDiskon.replace(/\D/g, '')) - parseInt(b.hargaDiskon.replace(/\D/g, ''))
    );
  } else if (criteria === 'termahal') {
    // Urutkan dari harga termahal
    filteredProducts.sort((a, b) => 
      parseInt(b.hargaDiskon.replace(/\D/g, '')) - parseInt(a.hargaDiskon.replace(/\D/g, ''))
    );
  } else if (criteria === 'WDP') {
    // Filter produk yang mengandung '1×' atau '2×'
    filteredProducts = filteredProducts.filter(product => 
      product.namaBarang.includes('7h') || product.namaBarang.includes('30h')
    );
  }

  // Tampilkan produk yang sudah diurutkan atau difilter
  displayProducts(filteredProducts);
}

  // Logika pesanan
  const placeOrderBtn = document.getElementById('placeOrderBtn');
  const orderModal = document.getElementById('orderModal');
  const orderDetails = document.getElementById('orderDetails');
  const confirmOrderBtn = document.getElementById('confirmOrderBtn');

  let paymentMethod; // Deklarasi variabel di luar untuk akses global

  placeOrderBtn.addEventListener('click', () => {
    const uid = document.getElementById('uid').value; // Ambil nilai UID
    const phoneNumber = document.getElementById('phoneNumber').value; // Ambil nilai nomor telepon

    // Ambil metode pembayaran yang dipilih
    paymentMethod = document.querySelector('input[name="paymentMethod"]:checked')?.value;

    if (!uid || !selectedProduct || !phoneNumber || !paymentMethod) {
  Swal.fire({
    icon: 'warning',
    title: 'Form Tidak Lengkap',
    text: 'UID, Server ID, produk, nomor telepon, dan metode pembayaran harus diisi dengan benar sebelum melanjutkan.',
    confirmButtonText: 'OK',
    background: '#1e1e1e',
    color: '#ffffff',
    confirmButtonColor: '#00e676',
  });
  return;
}


    // Tampilkan modal dengan detail pesanan
    orderDetails.innerHTML = `
      <p><strong>ID:</strong> ${uid}</p>
      <p><strong>Produk:</strong> ${selectedProduct.namaBarang} - Rp${selectedProduct.hargaDiskon}</p>
      <p><strong>Metode Pembayaran:</strong> ${paymentMethod}</p>
      <p><strong>Nomor Telepon:</strong> ${phoneNumber}</p>
      <p><strong>Nama Game:</strong>PUBG</p>
      
    `;

    orderModal.classList.add('show');
  });

  // Menutup modal dengan seret ke bawah
  let startY = 0;
  orderModal.addEventListener('touchstart', (e) => {
    startY = e.touches[0].clientY;
  });

  orderModal.addEventListener('touchmove', (e) => {
    const currentY = e.touches[0].clientY;
    const distanceY = currentY - startY;

    if (distanceY > 50) {
      orderModal.classList.remove('show');
    }
  });

  // Konfirmasi pesanan
  confirmOrderBtn.addEventListener('click', () => {
    const uid = document.getElementById('uid').value; // Ambil nilai dari input UID
    const combinedId = uid; // Menggunakan UID sebagai combinedId

    const orderData = {
      combinedId, // Menggunakan field baru yang berisi UID
      productName: selectedProduct.namaBarang,
      productPrice: selectedProduct.hargaDiskon,
      paymentMethod, // Menggunakan variabel yang dideklarasikan sebelumnya
      phoneNumber: document.getElementById('phoneNumber').value, // Ambil nilai dari input nomor telepon
      gameName: "PUBG", // Send game name to Firebase
      timestamp: new Date()
    };

    // Tampilkan animasi pemesanan
    showLoadingAnimation();

    db.collection('Orders').add(orderData)
      .then((docRef) => {
        const orderId = docRef.id; // Get the newly created order ID
        hideLoadingAnimation(); // Hide loading animation
        alert('Pesanan berhasil dibuat!');
        window.location.href = `orderan.html?orderId=${orderId}`; // Redirect with order ID
      })
      .catch((error) => {
        hideLoadingAnimation(); // Sembunyikan animasi jika terjadi error
        console.error("Error membuat pesanan: ", error);
        alert('Terjadi kesalahan saat membuat pesanan.');
      });
  });

  // Fungsi untuk menampilkan animasi loading
  function showLoadingAnimation() {
    const loadingAnimation = document.createElement('div');
    loadingAnimation.id = 'loadingAnimation';
    loadingAnimation.innerHTML = '<p>Proses pemesanan, harap tunggu...</p>'; // Ganti dengan animasi yang diinginkan
    loadingAnimation.style.position = 'fixed';
    loadingAnimation.style.top = '50%';
    loadingAnimation.style.left = '50%';
    loadingAnimation.style.transform = 'translate(-50%, -50%)';
    loadingAnimation.style.zIndex = '1000';
    loadingAnimation.style.backgroundColor = 'rgba(255, 255, 255, 0.8)';
    loadingAnimation.style.padding = '20px';
    loadingAnimation.style.borderRadius = '8px';
    loadingAnimation.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.5)';
    document.body.appendChild(loadingAnimation);
  }

  // Fungsi untuk menyembunyikan animasi loading
  function hideLoadingAnimation() {
    const loadingAnimation = document.getElementById('loadingAnimation');
    if (loadingAnimation) {
      loadingAnimation.remove();
    }
  }

 
</script>

</body>
</html>
